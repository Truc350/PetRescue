{% load humanize %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tím kiếm - PetRescue</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="../../static/css/DogKibbleView.css">
</head>
<body>
{% include "frontend/header.html" %}
<h1>
    Tìm thấy {{ total }} kết quả
    {% if keyword %}
    cho “{{ keyword }}”
    {% endif %}
</h1>

<!--Layout Chinh: Sidebar + contain -->
<div class="main-layout">
    <aside class="sidebar">
        <div class="filter-section">

            <div class="filter-group">
                <h3 class="filter-title">Giá<span>-</span></h3>
                <div class="filter-list">
                    <label><input type="checkbox"> < 100,000</label>
                    <label><input type="checkbox">100,000 - 200,000</label>
                    <label><input type="checkbox">200,000 - 300,000</label>
                    <label><input type="checkbox">300,000 - 400,000</label>
                    <label><input type="checkbox">400,000 - 500,000</label>
                    <label><input type="checkbox">500,000 - 600,000</label>
                    <label><input type="checkbox">600,000 - 700,000</label>
                    <label><input type="checkbox">700,000 - 800,000</label>
                    <label><input type="checkbox">800,000 - 900,000</label>
                    <label><input type="checkbox">900,000 - 1,000,000</label>
                </div>
            </div>

            <div class="filter-group">
                <h3 class="filter-title">Thương Hiệu<span>-</span></h3>
                <div class="filter-list">
                    <label><input type="checkbox">Royal Canin</label>
                    <label><input type="checkbox">Zenith</label>
                    <label><input type="checkbox">Taste Of The Wild</label>
                    <label><input type="checkbox">Inaba</label>
                    <label><input type="checkbox">Equilibrio</label>
                </div>
            </div>

        </div>
    </aside>

    <!--    Nội dung chính-->
    <div class="content">

        <!--toolbar sắp xếp-->
        <div class="toolbar">
            <div class="sort-by">
                <span>Sắp xếp theo:</span>
                <select>
                    <option>Bán chạy</option>
                    <option>Giá: Thấp đến cao</option>
                    <option>Giá: Cao đến thấp</option>
                </select>
            </div>
        </div>


        <section class="row g-4 section-spacing content-padding">

            {% if products %}
            {% for product in products %}
            <div class="col-lg-3 col-md-4 col-6">
                <div class="product-card bg-white rounded shadow-sm overflow-hidden">

                    <img src="{{ product.image }}"
                         class="w-100"
                         style="height: 200px; object-fit: contain;"
                         alt="{{ product.name }}">

                    <div class="p-3">
                        <div class="product-header d-flex justify-content-between align-items-center">
                            <p class="small text-muted mb-0">
                                {{ product.brand }}
                            </p>
                        </div>

                        <p class="fw-medium small line-clamp-2">
                            {{ product.name }}
                        </p>

                        <p class="text-danger fw-bold">
                            {{ product.final_price|intcomma }}đ
                        </p>

                        <a href="{% url 'product_detail' product.slug %}"
                           class="btn btn-danger w-100 rounded-pill py-2">
                            <i class="bi bi-cart-plus"></i> Mua ngay
                        </a>
                    </div>

                </div>
            </div>
            {% endfor %}
            {% else %}
            <p class="text-muted">
                Không tìm thấy sản phẩm nào phù hợp.
            </p>
            {% endif %}

        </section>

    </div>
</div>
</div>
<div class="support-btn">
    <i class="fas fa-comment-dots"></i> Hỗ trợ
</div>
{% include "frontend/footer.html" %}
</body>

<script>
    document.querySelectorAll('.btn-wishlist').forEach(btn => {
        btn.addEventListener('click', function () {
            this.classList.toggle('liked');
        });
    });
</script>
</html>